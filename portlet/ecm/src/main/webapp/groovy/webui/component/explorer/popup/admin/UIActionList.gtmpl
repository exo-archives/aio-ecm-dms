<%
/**
 * Created by The eXo Platform SARL
 * Author : Dang Van Minh
 *          minh.dang@exoplatform.com
 * Nov 8, 2006
 * 6:15:56 PM 
 */
%>
<% import org.exoplatform.webui.core.UIPageIterator; %>
<%
   UIPageIterator uiIterator = uicomponent.getChild(UIPageIterator.class) ;
   int totalPages = uiIterator.getAvailablePage();
%>
<div class="UIActionList" id="$uicomponent.id">
  <table class="UIGrid">
	  <thead>
	    <tr>
	      <th><%=_ctx.appRes("UIActionList.header.name")%></th>
		    <th><%=_ctx.appRes("UIActionList.header.description")%></th>
 		    <th><%=_ctx.appRes("UIActionList.header.instanceOf")%></th>
 		    <th><%=_ctx.appRes("UIActionList.header.action")%></th>
	    </tr>
	  </thead>
	  <tbody>
      <%
        def rowClass = "OddRow" ;
		    boolean even = true ;
		    if(uicomponent.hasActions()) {
			    for(action in uicomponent.getListActions()) {
			      if(even) rowClass = "EvenRow" ;  
			      else rowClass =  "OddRow" ; 
			      even = !even ;
      %>
		      <tr class="$rowClass">
		        <td>
		          <div class="Text">
		          	<%if(action.hasProperty("exo:name")){%>
		          		<%=action.getProperty("exo:name").getString()%>
		          	<%}%>
		          </div>
		        </td>
		        <td>
		          <div class="Text">
		          	<%if(action.hasProperty("exo:description")){%>
		          		<%=action.getProperty("exo:description").getString()%>
		          	<%}%>
		          </div>
		        </td>
		        <td>
		          <div class="Text">[<%=action.getPrimaryNodeType().getName()%>]</div>
		        </td>
		        <td style="width:120px;">
		        <%
		          for(act in uicomponent.getActions()) { 
		        %>
	              <a href="<%=uicomponent.event(act, action.getName())%>">
	                <div class="${act}16x16Icon" title="$act" style="margin-left:7px;float:left;"></div>
	              </a>
		        <%} %>
		        </td>
		      </tr>
	    <%
	        }
	      }
	    %>
    </tbody>
  </table>
  <% if(totalPages > 1){ %>
  <% uicomponent.renderChild(UIPageIterator.class) %>
  <% } %>
  <div class="UIAction"> 
    <table class="ActionContainer">
    	<tr>
    		<td align="center">
		      <a href="<%=uicomponent.event("Close")%>" class="ActionButton LightBlueStyle" >
						<div class="ButtonLeft">
						  <div class="ButtonRight">
							  <div class="ButtonMiddle">
									<%=_ctx.appRes("UIActionList.action.Close")%>
					      </div>
					    </div>
				    </div>
					</a>
    		</td>
    	</tr>
    </table>
  </div>
</div>
